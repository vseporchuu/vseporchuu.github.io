<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö–∞–ª–µ–Ω–¥–∞—Ä—å –≤—ã—Ö–æ–¥–æ–≤ - Youkai Studio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        .calendar-container {
            background-color: var(--dark-light);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .calendar-header h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 24px;
            color: var(--text-primary);
        }
        
        .week-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 15px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        
        .calendar-day {
            min-height: 80px;
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 10px;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .calendar-day:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .calendar-day.empty {
            background-color: transparent;
            border: 1px solid transparent;
        }
        
        .calendar-day.today {
            border: 2px solid var(--primary-color);
            background-color: rgba(255, 102, 163, 0.1);
        }
        
        .day-number {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 5px;
            color: var(--text-secondary);
        }
        
        .day-events {
            margin-top: 5px;
        }
        
        .day-event {
            background: var(--gradient);
            color: white;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 10px;
            margin-bottom: 3px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .day-event:hover {
            transform: scale(1.05);
        }
        
        .releases-list {
            background-color: var(--dark-light);
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .release-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background-color: var(--card-bg);
            border-radius: 10px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }
        
        .release-item:hover {
            border-color: var(--primary-color);
            transform: translateX(5px);
        }
        
        .release-date {
            min-width: 80px;
            text-align: center;
            margin-right: 20px;
        }
        
        .release-day {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            display: block;
        }
        
        .release-month {
            font-size: 14px;
            color: var(--text-secondary);
            display: block;
        }
        
        .release-info {
            flex: 1;
        }
        
        .release-info h4 {
            font-family: 'Poppins', sans-serif;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .release-time {
            color: var(--text-secondary);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .calendar-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .filter-btn {
            padding: 8px 16px;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .filter-btn.active {
            background: var(--gradient);
            color: white;
            border-color: transparent;
        }
        
        @media (max-width: 768px) {
            .calendar-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .calendar-grid {
                gap: 5px;
            }
            
            .calendar-day {
                min-height: 60px;
                padding: 5px;
                font-size: 12px;
            }
            
            .day-number {
                font-size: 12px;
            }
            
            .day-event {
                font-size: 8px;
                padding: 2px 4px;
            }
            
            .release-item {
                flex-direction: column;
                align-items: flex-start;
                padding: 12px;
            }
            
            .release-date {
                margin-right: 0;
                margin-bottom: 10px;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .release-day {
                font-size: 20px;
            }
            
            .calendar-filters {
                overflow-x: auto;
                padding-bottom: 10px;
                -webkit-overflow-scrolling: touch;
            }
            
            .filter-btn {
                flex-shrink: 0;
                padding: 8px 12px;
            }
        }
        
        @media (max-width: 480px) {
            .calendar-day {
                min-height: 50px;
            }
            
            .week-days {
                font-size: 12px;
            }
            
            .day-event {
                display: none;
            }
            
            .calendar-day.has-events::after {
                content: '‚Ä¢';
                position: absolute;
                bottom: 5px;
                right: 5px;
                color: var(--primary-color);
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ (–æ–±—â–∞—è –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü) -->
    <header>
        <div class="container header-container">
            <div class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </div>
            
            <div class="logo">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <path d="M50,10 C70,10 85,25 85,45 C85,55 80,64 72,70 L72,85 C72,90 67,95 62,95 L38,95 C33,95 28,90 28,85 L28,70 C20,64 15,55 15,45 C15,25 30,10 50,10 Z" fill="#ff66a3"/>
                    <circle cx="40" cy="35" r="5" fill="#ffffff"/>
                    <circle cx="60" cy="35" r="5" fill="#ffffff"/>
                    <path d="M45,55 C45,58 47,60 50,60 C53,60 55,58 55,55 C55,52 53,50 50,50 C47,50 45,52 45,55 Z" fill="#ffffff"/>
                    <path d="M35,75 L65,75 C67,75 69,77 69,79 C69,81 67,83 65,83 L35,83 C33,83 31,81 31,79 C31,77 33,75 35,75 Z" fill="#c77dff"/>
                </svg>
                Youkai<span>Studio</span>
            </div>
            
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="anime-catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                    <li><a href="calendar.html" class="active">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</a></li>
                    <li><a href="genres.html">–ñ–∞–Ω—Ä—ã</a></li>
                    <li><a href="profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a></li>
                </ul>
            </nav>
            
            <div class="search-box" id="searchBox">
                <i class="fas fa-search" id="searchIcon"></i>
                <input type="text" placeholder="–ü–æ–∏—Å–∫ –∞–Ω–∏–º–µ..." id="searchInput">
            </div>
            
            <div class="header-right">
                <div class="mobile-search-btn" id="mobileSearchBtn" style="display: none;">
                    <i class="fas fa-search"></i>
                </div>
                
                <div class="user-menu" id="userMenu">
                    <div class="user-avatar" id="userAvatar" title="–ú–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                        <i class="fas fa-user"></i>
                    </div>
                    
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-dropdown-header" id="dropdownHeader">
                            <div class="user-dropdown-avatar" id="dropdownAvatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-dropdown-info" id="dropdownInfo">
                                <h4>–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram</h4>
                                <p>–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º</p>
                            </div>
                        </div>
                        
                        <div class="user-dropdown-nav">
                            <a href="#" id="telegramLoginBtn" class="telegram-login">
                                <i class="fab fa-telegram"></i> –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram
                            </a>
                            
                            <div class="user-dropdown-divider"></div>
                            
                            <a href="profile.html">
                                <i class="fas fa-user"></i> –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                            </a>
                            
                            <a href="messages.html">
                                <i class="fas fa-comments"></i> –ö–æ–Ω—Ç–∞–∫—Ç—ã
                            </a>
                            
                            <div class="user-dropdown-divider"></div>
                            
                            <a href="index.html">
                                <i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è
                            </a>
                            
                            <a href="calendar.html" class="active">
                                <i class="fas fa-calendar"></i> –ö–∞–ª–µ–Ω–¥–∞—Ä—å
                            </a>
                            
                            <a href="settings.html">
                                <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                            </a>
                            
                            <a href="#" id="logoutBtn">
                                <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mobile-nav-overlay" id="mobileNavOverlay"></div>
        <div class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-header">
                <div class="logo">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                        <path d="M50,10 C70,10 85,25 85,45 C85,55 80,64 72,70 L72,85 C72,90 67,95 62,95 L38,95 C33,95 28,90 28,85 L28,70 C20,64 15,55 15,45 C15,25 30,10 50,10 Z" fill="#ff66a3"/>
                        <circle cx="40" cy="35" r="5" fill="#ffffff"/>
                        <circle cx="60" cy="35" r="5" fill="#ffffff"/>
                        <path d="M45,55 C45,58 47,60 50,60 C53,60 55,58 55,55 C55,52 53,50 50,50 C47,50 45,52 45,55 Z" fill="#ffffff"/>
                        <path d="M35,75 L65,75 C67,75 69,77 69,79 C69,81 67,83 65,83 L35,83 C33,83 31,81 31,79 C31,77 33,75 35,75 Z" fill="#c77dff"/>
                    </svg>
                    <span style="margin-left: 8px;">Youkai Studio</span>
                </div>
                <div class="mobile-nav-close" id="mobileNavClose">
                    <i class="fas fa-times"></i>
                </div>
            </div>
            <ul>
                <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="anime-catalog.html">–ö–∞—Ç–∞–ª–æ–≥ –∞–Ω–∏–º–µ</a></li>
                <li><a href="calendar.html" class="active">–ö–∞–ª–µ–Ω–¥–∞—Ä—å –≤—ã—Ö–æ–¥–æ–≤</a></li>
                <li><a href="genres.html">–ñ–∞–Ω—Ä—ã</a></li>
                <li><a href="profile.html">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a></li>
                <li><a href="messages.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                <li><a href="settings.html">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a></li>
            </ul>
        </div>
    </header>

    <main class="container">
        <div class="page-header">
            <h1>–ö–∞–ª–µ–Ω–¥–∞—Ä—å –≤—ã—Ö–æ–¥–æ–≤</h1>
            <p>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –≤—ã—Ö–æ–¥–æ–º –Ω–æ–≤—ã—Ö —Å–µ—Ä–∏–π –≤–∞—à–∏—Ö –ª—é–±–∏–º—ã—Ö –∞–Ω–∏–º–µ</p>
        </div>
        
        <div class="calendar-filters">
            <button class="filter-btn active" data-filter="all">–í—Å–µ –¥–Ω–∏</button>
            <button class="filter-btn" data-filter="today">–°–µ–≥–æ–¥–Ω—è</button>
            <button class="filter-btn" data-filter="week">–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ</button>
            <button class="filter-btn" data-filter="popular">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</button>
        </div>
        
        <div class="calendar-container">
            <div class="calendar-header">
                <h2 id="currentMonth">–î–µ–∫–∞–±—Ä—å 2023</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-outline" id="prevMonth">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="btn btn-outline" id="todayBtn">–°–µ–≥–æ–¥–Ω—è</button>
                    <button class="btn btn-outline" id="nextMonth">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            
            <div class="week-days">
                <div>–ü–Ω</div>
                <div>–í—Ç</div>
                <div>–°—Ä</div>
                <div>–ß—Ç</div>
                <div>–ü—Ç</div>
                <div>–°–±</div>
                <div>–í—Å</div>
            </div>
            
            <div class="calendar-grid" id="calendarGrid">
                <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>
        
        <div class="releases-list">
            <h3 style="margin-bottom: 20px;">–ë–ª–∏–∂–∞–π—à–∏–µ —Ä–µ–ª–∏–∑—ã</h3>
            <div id="upcomingReleases">
                <!-- –°–ø–∏—Å–æ–∫ —Ä–µ–ª–∏–∑–æ–≤ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Youkai Studio</h3>
                    <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö —Ü–µ–Ω–∏—Ç–µ–ª–µ–π –∞–Ω–∏–º–µ. –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ.</p>
                    <div class="social-links">
                        <a href="https://t.me/youkaistudio" target="_blank" title="Telegram">
                            <i class="fab fa-telegram"></i>
                        </a>
                        <a href="https://vk.com/youkaistudio" target="_blank" title="–í–ö–æ–Ω—Ç–∞–∫—Ç–µ">
                            <i class="fab fa-vk"></i>
                        </a>
                        <a href="https://youtube.com/@youkaistudio" target="_blank" title="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
                    <ul>
                        <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="anime-catalog.html">–ö–∞—Ç–∞–ª–æ–≥ –∞–Ω–∏–º–µ</a></li>
                        <li><a href="calendar.html">–ö–∞–ª–µ–Ω–¥–∞—Ä—å –≤—ã—Ö–æ–¥–æ–≤</a></li>
                        <li><a href="genres.html">–ñ–∞–Ω—Ä—ã</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>–ü–æ–º–æ—â—å</h3>
                    <ul>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="support.html">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a></li>
                        <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 Youkai Studio. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script src="common.js"></script>
    <script>
        // –î–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
        const calendarData = [
            { date: '2023-12-15', title: '–ê—Ç–∞–∫–∞ –¢–∏—Ç–∞–Ω–æ–≤', episode: '–°–µ—Ä–∏—è 29', time: '15:00' },
            { date: '2023-12-15', title: '–ú–∞–≥–∏—á–µ—Å–∫–∞—è –±–∏—Ç–≤–∞', episode: '–°–µ—Ä–∏—è 15', time: '18:00' },
            { date: '2023-12-16', title: '–î–µ–º–æ–Ω-—É–±–∏–π—Ü–∞', episode: '–°–µ—Ä–∏—è 12', time: '16:30' },
            { date: '2023-12-18', title: '–í–∞–Ω –ü–∏—Å', episode: '–°–µ—Ä–∏—è 1075', time: '14:00' },
            { date: '2023-12-19', title: '–•–æ—Ä–∏–º–∏—è', episode: '–°–µ—Ä–∏—è 8', time: '19:00' },
            { date: '2023-12-20', title: '–ë–ª–∏—á', episode: '–°–µ—Ä–∏—è 5', time: '17:00' },
            { date: '2023-12-22', title: '–°—Ç–∞–ª—å–Ω–æ–π –∞–ª—Ö–∏–º–∏–∫', episode: '–°–ø–µ—à–ª', time: '20:00' },
            { date: '2023-12-25', title: '–ù–∞—Ä—É—Ç–æ', episode: '–§–∏–ª—å–º', time: '21:00' }
        ];

        let currentDate = new Date();
        let currentYear = currentDate.getFullYear();
        let currentMonth = currentDate.getMonth();

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
        document.addEventListener('DOMContentLoaded', function() {
            renderCalendar(currentYear, currentMonth);
            renderUpcomingReleases();
            
            // –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            document.getElementById('prevMonth').addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar(currentYear, currentMonth);
            });
            
            document.getElementById('nextMonth').addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCalendar(currentYear, currentMonth);
            });
            
            document.getElementById('todayBtn').addEventListener('click', () => {
                currentDate = new Date();
                currentYear = currentDate.getFullYear();
                currentMonth = currentDate.getMonth();
                renderCalendar(currentYear, currentMonth);
            });
            
            // –§–∏–ª—å—Ç—Ä—ã
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filter = this.dataset.filter;
                    filterReleases(filter);
                });
            });
            
            // –ü–æ–∏—Å–∫
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    filterReleasesBySearch(this.value);
                });
            }
        });

        // –†–µ–Ω–¥–µ—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è
        function renderCalendar(year, month) {
            const calendarGrid = document.getElementById('calendarGrid');
            const currentMonthElement = document.getElementById('currentMonth');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            const monthNames = [
                '–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å',
                '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'
            ];
            currentMonthElement.textContent = `${monthNames[month]} ${year}`;
            
            // –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDay = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1; // –ü–Ω=0, –í—Å=6
            
            // –û—á–∏—â–∞–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å
            calendarGrid.innerHTML = '';
            
            // –ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –¥–Ω–µ–º
            for (let i = 0; i < startingDay; i++) {
                calendarGrid.innerHTML += '<div class="calendar-day empty"></div>';
            }
            
            // –î–Ω–∏ –º–µ—Å—è—Ü–∞
            const today = new Date();
            const isCurrentMonth = today.getFullYear() === year && today.getMonth() === month;
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayEvents = calendarData.filter(event => event.date === dateStr);
                const isToday = isCurrentMonth && day === today.getDate();
                
                let dayHTML = `<div class="calendar-day ${isToday ? 'today' : ''} ${dayEvents.length > 0 ? 'has-events' : ''}" data-date="${dateStr}">`;
                dayHTML += `<div class="day-number">${day}</div>`;
                
                if (dayEvents.length > 0) {
                    dayHTML += '<div class="day-events">';
                    dayEvents.slice(0, 2).forEach(event => {
                        dayHTML += `<div class="day-event" title="${event.title} - ${event.episode} –≤ ${event.time}">${event.title}</div>`;
                    });
                    if (dayEvents.length > 2) {
                        dayHTML += `<div class="day-event">+${dayEvents.length - 2} –µ—â—ë</div>`;
                    }
                    dayHTML += '</div>';
                }
                
                dayHTML += '</div>';
                calendarGrid.innerHTML += dayHTML;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –¥–Ω–µ–π —Å —Å–æ–±—ã—Ç–∏—è–º–∏
            document.querySelectorAll('.calendar-day.has-events').forEach(day => {
                day.addEventListener('click', function() {
                    const date = this.dataset.date;
                    const events = calendarData.filter(event => event.date === date);
                    
                    if (events.length > 0) {
                        showDayEvents(date, events);
                    }
                });
            });
        }

        // –†–µ–Ω–¥–µ—Ä –±–ª–∏–∂–∞–π—à–∏—Ö —Ä–µ–ª–∏–∑–æ–≤
        function renderUpcomingReleases() {
            const container = document.getElementById('upcomingReleases');
            const today = new Date();
            const nextWeek = new Date(today);
            nextWeek.setDate(today.getDate() + 7);
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º —Ä–µ–ª–∏–∑—ã –Ω–∞ –±–ª–∏–∂–∞–π—à—É—é –Ω–µ–¥–µ–ª—é
            const upcoming = calendarData.filter(event => {
                const eventDate = new Date(event.date);
                return eventDate >= today && eventDate <= nextWeek;
            }).sort((a, b) => new Date(a.date) - new Date(b.date));
            
            container.innerHTML = '';
            
            if (upcoming.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">–ù–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤ –Ω–∞ –±–ª–∏–∂–∞–π—à—É—é –Ω–µ–¥–µ–ª—é</p>';
                return;
            }
            
            upcoming.forEach(event => {
                const date = new Date(event.date);
                const day = date.getDate();
                const monthNames = ['–Ø–Ω–≤', '–§–µ–≤', '–ú–∞—Ä', '–ê–ø—Ä', '–ú–∞–π', '–ò—é–Ω', '–ò—é–ª', '–ê–≤–≥', '–°–µ–Ω', '–û–∫—Ç', '–ù–æ—è', '–î–µ–∫'];
                const month = monthNames[date.getMonth()];
                
                container.innerHTML += `
                    <div class="release-item" data-date="${event.date}">
                        <div class="release-date">
                            <span class="release-day">${day}</span>
                            <span class="release-month">${month}</span>
                        </div>
                        <div class="release-info">
                            <h4>${event.title} - ${event.episode}</h4>
                            <div class="release-time">
                                <i class="far fa-clock"></i>
                                ${event.time}
                            </div>
                        </div>
                        <button class="btn btn-outline" onclick="setReminder('${event.date}', '${event.title}')">
                            <i class="far fa-bell"></i> –ù–∞–ø–æ–º–Ω–∏—Ç—å
                        </button>
                    </div>
                `;
            });
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–ª–∏–∑–æ–≤
        function filterReleases(filter) {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(today.getDate() + 1);
            
            const endOfWeek = new Date(today);
            endOfWeek.setDate(today.getDate() + (7 - today.getDay()));
            
            let filtered = [...calendarData];
            
            switch(filter) {
                case 'today':
                    const todayStr = today.toISOString().split('T')[0];
                    filtered = calendarData.filter(event => event.date === todayStr);
                    break;
                case 'week':
                    filtered = calendarData.filter(event => {
                        const eventDate = new Date(event.date);
                        return eventDate >= today && eventDate <= endOfWeek;
                    });
                    break;
                case 'popular':
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
                    filtered = calendarData.slice(0, 5);
                    break;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
            highlightFilteredDays(filtered);
            updateUpcomingReleases(filtered);
        }

        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–Ω–µ–π
        function highlightFilteredDays(filteredEvents) {
            document.querySelectorAll('.calendar-day').forEach(day => {
                const date = day.dataset.date;
                const hasFilteredEvent = filteredEvents.some(event => event.date === date);
                
                if (date && hasFilteredEvent) {
                    day.style.boxShadow = '0 0 0 2px var(--primary-color)';
                } else {
                    day.style.boxShadow = '';
                }
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ä–µ–ª–∏–∑–æ–≤
        function updateUpcomingReleases(events) {
            const container = document.getElementById('upcomingReleases');
            container.innerHTML = '';
            
            events.sort((a, b) => new Date(a.date) - new Date(b.date)).forEach(event => {
                const date = new Date(event.date);
                const day = date.getDate();
                const monthNames = ['–Ø–Ω–≤', '–§–µ–≤', '–ú–∞—Ä', '–ê–ø—Ä', '–ú–∞–π', '–ò—é–Ω', '–ò—é–ª', '–ê–≤–≥', '–°–µ–Ω', '–û–∫—Ç', '–ù–æ—è', '–î–µ–∫'];
                const month = monthNames[date.getMonth()];
                
                container.innerHTML += `
                    <div class="release-item">
                        <div class="release-date">
                            <span class="release-day">${day}</span>
                            <span class="release-month">${month}</span>
                        </div>
                        <div class="release-info">
                            <h4>${event.title} - ${event.episode}</h4>
                            <div class="release-time">
                                <i class="far fa-clock"></i>
                                ${event.time}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            if (events.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">–ù–µ—Ç —Ä–µ–ª–∏–∑–æ–≤ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É</p>';
            }
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–∏—Å–∫—É
        function filterReleasesBySearch(query) {
            if (!query.trim()) {
                document.querySelectorAll('.release-item').forEach(item => {
                    item.style.display = 'flex';
                });
                return;
            }
            
            const searchLower = query.toLowerCase();
            document.querySelectorAll('.release-item').forEach(item => {
                const title = item.querySelector('h4').textContent.toLowerCase();
                item.style.display = title.includes(searchLower) ? 'flex' : 'none';
            });
        }

        // –ü–æ–∫–∞–∑ —Å–æ–±—ã—Ç–∏–π –¥–Ω—è
        function showDayEvents(date, events) {
            const tg = window.YoukaiStudio?.getTelegramWebApp();
            const user = window.YoukaiStudio?.getCurrentUser();
            
            let message = `üìÖ –°–æ–±—ã—Ç–∏—è –Ω–∞ ${date}:\n\n`;
            events.forEach((event, index) => {
                message += `${index + 1}. ${event.title}\n`;
                message += `   üì∫ ${event.episode}\n`;
                message += `   ‚è∞ ${event.time}\n\n`;
            });
            
            if (tg && tg.showAlert) {
                tg.showAlert(message);
            } else {
                alert(message);
            }
        }

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
        function setReminder(date, title) {
            const user = window.YoukaiStudio?.getCurrentUser();
            
            if (user) {
                window.YoukaiStudio.showNotification(`–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: ${title} –Ω–∞ ${date}`, 'success');
                
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
                reminders.push({ date, title, userId: user.id });
                localStorage.setItem('reminders', JSON.stringify(reminders));
            } else {
                window.YoukaiStudio.showNotification('–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è', 'warning');
            }
        }

        // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
        if (window.YoukaiStudio?.isMobileDevice()) {
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ç–∞–ø-–∑–æ–Ω—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
            document.querySelectorAll('.calendar-day, .release-item, .filter-btn').forEach(el => {
                el.style.minHeight = '44px';
            });
            
            // –£–ª—É—á—à–∞–µ–º —Å–∫—Ä–æ–ª–ª –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
            const filtersContainer = document.querySelector('.calendar-filters');
            if (filtersContainer) {
                filtersContainer.style.paddingBottom = '5px';
            }
        }
    </script>
</body>
</html>
