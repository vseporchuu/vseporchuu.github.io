<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–î—Ä—É–∑—å—è - Youkai Studio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        .contacts-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .contacts-header {
            background-color: var(--dark-light);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }
        
        .contacts-header h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .contacts-header p {
            color: var(--text-secondary);
            font-size: 16px;
        }
        
        .contacts-search {
            margin-bottom: 25px;
        }
        
        .contacts-search input {
            width: 100%;
            padding: 15px 20px;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 16px;
        }
        
        .contacts-search input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .contacts-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
            -webkit-overflow-scrolling: touch;
        }
        
        .contacts-tabs::-webkit-scrollbar {
            display: none;
        }
        
        .contact-tab {
            padding: 10px 20px;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .contact-tab.active {
            background: var(--gradient);
            color: white;
            border-color: transparent;
        }
        
        .contacts-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .contact-card {
            display: flex;
            align-items: center;
            padding: 15px;
            background-color: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }
        
        .contact-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .contact-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .contact-info {
            flex: 1;
            min-width: 0;
        }
        
        .contact-info h4 {
            font-family: 'Poppins', sans-serif;
            margin-bottom: 5px;
            font-size: 16px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .contact-details {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .online-status {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .online-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--success-color);
        }
        
        .online-dot.offline {
            background-color: var(--text-secondary);
        }
        
        .contact-actions {
            display: flex;
            gap: 10px;
            margin-left: 15px;
            flex-shrink: 0;
        }
        
        .contact-action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--dark-light);
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .contact-action-btn:hover {
            background: var(--gradient);
            transform: scale(1.1);
        }
        
        .privacy-warning {
            background-color: rgba(255, 209, 102, 0.1);
            border: 1px solid var(--warning-color);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
            color: var(--warning-color);
            font-size: 14px;
        }
        
        .no-contacts {
            text-align: center;
            padding: 50px 20px;
            color: var(--text-secondary);
        }
        
        .no-contacts i {
            font-size: 48px;
            margin-bottom: 15px;
            color: var(--text-secondary);
        }
        
        /* –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è */
        @media (max-width: 768px) {
            .contacts-header {
                padding: 20px;
            }
            
            .contacts-header h1 {
                font-size: 24px;
            }
            
            .contact-card {
                padding: 12px;
            }
            
            .contact-avatar {
                width: 40px;
                height: 40px;
                font-size: 16px;
                margin-right: 12px;
            }
            
            .contact-info h4 {
                font-size: 14px;
            }
            
            .contact-details {
                font-size: 12px;
            }
            
            .contact-action-btn {
                width: 36px;
                height: 36px;
            }
            
            .contacts-search input {
                padding: 12px 15px;
                font-size: 16px;
            }
            
            .contact-tab {
                padding: 8px 16px;
                font-size: 14px;
            }
        }
        
        @media (max-width: 480px) {
            .contact-actions {
                flex-direction: column;
                gap: 5px;
            }
            
            .contact-action-btn {
                width: 32px;
                height: 32px;
                font-size: 12px;
            }
            
            .contacts-header {
                padding: 15px;
            }
        }
        
        /* –¢–µ–º—ã –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–∫ */
        .avatar-theme-1 { background: linear-gradient(135deg, #ff66a3, #c77dff); }
        .avatar-theme-2 { background: linear-gradient(135deg, #6bffb8, #00cc88); }
        .avatar-theme-3 { background: linear-gradient(135deg, #ffd166, #ffaa00); }
        .avatar-theme-4 { background: linear-gradient(135deg, #7bb4ff, #0088cc); }
        .avatar-theme-5 { background: linear-gradient(135deg, #c77dff, #9933ff); }
    </style>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ -->
    <header>
        <div class="container header-container">
            <div class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </div>
            
            <div class="logo">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <path d="M50,10 C70,10 85,25 85,45 C85,55 80,64 72,70 L72,85 C72,90 67,95 62,95 L38,95 C33,95 28,90 28,85 L28,70 C20,64 15,55 15,45 C15,25 30,10 50,10 Z" fill="#ff66a3"/>
                    <circle cx="40" cy="35" r="5" fill="#ffffff"/>
                    <circle cx="60" cy="35" r="5" fill="#ffffff"/>
                    <path d="M45,55 C45,58 47,60 50,60 C53,60 55,58 55,55 C55,52 53,50 50,50 C47,50 45,52 45,55 Z" fill="#ffffff"/>
                    <path d="M35,75 L65,75 C67,75 69,77 69,79 C69,81 67,83 65,83 L35,83 C33,83 31,81 31,79 C31,77 33,75 35,75 Z" fill="#c77dff"/>
                </svg>
                Youkai<span>Studio</span>
            </div>
            
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="anime-catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                    <li><a href="calendar.html">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</a></li>
                    <li><a href="profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a></li>
                    <li><a href="messages.html" class="active">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                </ul>
            </nav>
            
            <div class="search-box" id="searchBox">
                <i class="fas fa-search" id="searchIcon"></i>
                <input type="text" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..." id="searchInput">
            </div>
            
            <div class="header-right">
                <div class="mobile-search-btn" id="mobileSearchBtn" style="display: none;">
                    <i class="fas fa-search"></i>
                </div>
                
                <div class="user-menu" id="userMenu">
                    <div class="user-avatar" id="userAvatar" title="–ú–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                        <i class="fas fa-user"></i>
                    </div>
                    
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-dropdown-header" id="dropdownHeader">
                            <div class="user-dropdown-avatar" id="dropdownAvatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-dropdown-info" id="dropdownInfo">
                                <h4>–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram</h4>
                                <p>–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º</p>
                            </div>
                        </div>
                        
                        <div class="user-dropdown-nav">
                            <a href="#" id="telegramLoginBtn" class="telegram-login">
                                <i class="fab fa-telegram"></i> –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram
                            </a>
                            
                            <div class="user-dropdown-divider"></div>
                            
                            <a href="profile.html">
                                <i class="fas fa-user"></i> –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                            </a>
                            
                            <a href="messages.html" class="active">
                                <i class="fas fa-users"></i> –ö–æ–Ω—Ç–∞–∫—Ç—ã
                            </a>
                            
                            <a href="favorites.html">
                                <i class="fas fa-heart"></i> –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
                            </a>
                            
                            <div class="user-dropdown-divider"></div>
                            
                            <a href="index.html">
                                <i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è
                            </a>
                            
                            <a href="anime-catalog.html">
                                <i class="fas fa-list"></i> –ö–∞—Ç–∞–ª–æ–≥
                            </a>
                            
                            <a href="calendar.html">
                                <i class="fas fa-calendar"></i> –ö–∞–ª–µ–Ω–¥–∞—Ä—å
                            </a>
                            
                            <a href="settings.html">
                                <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                            </a>
                            
                            <a href="#" id="logoutBtn" style="display: none;">
                                <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mobile-nav-overlay" id="mobileNavOverlay"></div>
        <div class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-header">
                <div class="logo">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                        <path d="M50,10 C70,10 85,25 85,45 C85,55 80,64 72,70 L72,85 C72,90 67,95 62,95 L38,95 C33,95 28,90 28,85 L28,70 C20,64 15,55 15,45 C15,25 30,10 50,10 Z" fill="#ff66a3"/>
                        <circle cx="40" cy="35" r="5" fill="#ffffff"/>
                        <circle cx="60" cy="35" r="5" fill="#ffffff"/>
                        <path d="M45,55 C45,58 47,60 50,60 C53,60 55,58 55,55 C55,52 53,50 50,50 C47,50 45,52 45,55 Z" fill="#ffffff"/>
                        <path d="M35,75 L65,75 C67,75 69,77 69,79 C69,81 67,83 65,83 L35,83 C33,83 31,81 31,79 C31,77 33,75 35,75 Z" fill="#c77dff"/>
                    </svg>
                    <span style="margin-left: 8px;">Youkai Studio</span>
                </div>
                <div class="mobile-nav-close" id="mobileNavClose">
                    <i class="fas fa-times"></i>
                </div>
            </div>
            <ul>
                <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="anime-catalog.html">–ö–∞—Ç–∞–ª–æ–≥ –∞–Ω–∏–º–µ</a></li>
                <li><a href="calendar.html">–ö–∞–ª–µ–Ω–¥–∞—Ä—å –≤—ã—Ö–æ–¥–æ–≤</a></li>
                <li><a href="genres.html">–ñ–∞–Ω—Ä—ã</a></li>
                <li><a href="profile.html">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a></li>
                <li><a href="messages.html" class="active">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                <li><a href="favorites.html">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a></li>
                <li><a href="settings.html">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a></li>
            </ul>
        </div>
    </header>

    <main class="container">
        <div class="contacts-container">
            <div class="contacts-header">
                <h1>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h1>
                <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ Telegram</p>
            </div>
            
            <div class="contacts-search">
                <input type="text" id="contactsSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ username...">
            </div>
            
            <div class="contacts-tabs">
                <div class="contact-tab active" data-filter="all">–í—Å–µ</div>
                <div class="contact-tab" data-filter="online">–í —Å–µ—Ç–∏</div>
                <div class="contact-tab" data-filter="friends">–î—Ä—É–∑—å—è</div>
                <div class="contact-tab" data-filter="admins">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã</div>
                <div class="contact-tab" data-filter="recent">–ù–µ–¥–∞–≤–Ω–∏–µ</div>
            </div>
            
            <div class="contacts-list" id="contactsList">
                <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            
            <div class="privacy-warning" id="privacyWarning" style="display: none;">
                <i class="fas fa-shield-alt"></i>
                <p>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–∏—Å–∞—Ç—å –≤–∞–º. –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –≤ <a href="settings.html" style="color: var(--warning-color);">–ù–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏</a>.</p>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Youkai Studio</h3>
                    <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö —Ü–µ–Ω–∏—Ç–µ–ª–µ–π –∞–Ω–∏–º–µ. –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ.</p>
                    <div class="social-links">
                        <a href="https://t.me/youkaistudio" target="_blank" title="Telegram" id="telegramLink">
                            <i class="fab fa-telegram"></i>
                        </a>
                        <a href="https://vk.com/youkaistudio" target="_blank" title="–í–ö–æ–Ω—Ç–∞–∫—Ç–µ">
                            <i class="fab fa-vk"></i>
                        </a>
                        <a href="https://youtube.com/@youkaistudio" target="_blank" title="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
                    <ul>
                        <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="anime-catalog.html">–ö–∞—Ç–∞–ª–æ–≥ –∞–Ω–∏–º–µ</a></li>
                        <li><a href="calendar.html">–ö–∞–ª–µ–Ω–¥–∞—Ä—å –≤—ã—Ö–æ–¥–æ–≤</a></li>
                        <li><a href="genres.html">–ñ–∞–Ω—Ä—ã</a></li>
                        <li><a href="messages.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>–ü–æ–º–æ—â—å</h3>
                    <ul>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="rules.html">–ü—Ä–∞–≤–∏–ª–∞ —Å–∞–π—Ç–∞</a></li>
                        <li><a href="support.html">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a></li>
                        <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>–ü–∞—Ä—Ç–Ω–µ—Ä–∞–º</h3>
                    <ul>
                        <li><a href="rights-holders.html">–î–ª—è –ø—Ä–∞–≤–æ–æ–±–ª–∞–¥–∞—Ç–µ–ª–µ–π</a></li>
                        <li><a href="advertising.html">–†–µ–∫–ª–∞–º–∞ –Ω–∞ —Å–∞–π—Ç–µ</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 Youkai Studio. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script src="common.js"></script>
    <script>
        // –î–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞)
        const contactsData = [
            { 
                id: '123456789', 
                name: '–ê–ª–µ–∫—Å–µ–π –ò–≤–∞–Ω–æ–≤', 
                username: 'alexeyivanov', 
                avatar: '–ê',
                theme: 'avatar-theme-1',
                online: true,
                lastSeen: '—Ç–æ–ª—å–∫–æ —á—Ç–æ',
                isFriend: true,
                isAdmin: false,
                sharedAnime: 15,
                privacy: 'enabled'
            },
            { 
                id: '987654321', 
                name: '–ú–∞—Ä–∏—è –°–æ–∫–æ–ª–æ–≤–∞', 
                username: 'mariya_sokolova', 
                avatar: '–ú',
                theme: 'avatar-theme-2',
                online: true,
                lastSeen: '5 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥',
                isFriend: true,
                isAdmin: false,
                sharedAnime: 8,
                privacy: 'enabled'
            },
            { 
                id: '456789123', 
                name: '–î–º–∏—Ç—Ä–∏–π –ü–µ—Ç—Ä–æ–≤', 
                username: 'dmitry_petrov', 
                avatar: '–î',
                theme: 'avatar-theme-3',
                online: false,
                lastSeen: '2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥',
                isFriend: false,
                isAdmin: false,
                sharedAnime: 3,
                privacy: 'enabled'
            },
            { 
                id: '789123456', 
                name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä Youkai', 
                username: 'youkai_admin', 
                avatar: 'Y',
                theme: 'avatar-theme-4',
                online: true,
                lastSeen: '–≤ —Å–µ—Ç–∏',
                isFriend: false,
                isAdmin: true,
                sharedAnime: 0,
                privacy: 'enabled'
            },
            { 
                id: '321654987', 
                name: '–ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞', 
                username: 'anna_kozlova', 
                avatar: '–ê',
                theme: 'avatar-theme-5',
                online: false,
                lastSeen: '–≤—á–µ—Ä–∞',
                isFriend: true,
                isAdmin: false,
                sharedAnime: 12,
                privacy: 'disabled'
            },
            { 
                id: '654987321', 
                name: '–ò–≤–∞–Ω –°–∏–¥–æ—Ä–æ–≤', 
                username: 'ivan_sidorov', 
                avatar: '–ò',
                theme: 'avatar-theme-1',
                online: true,
                lastSeen: '30 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥',
                isFriend: false,
                isAdmin: false,
                sharedAnime: 5,
                privacy: 'enabled'
            }
        ];

        let currentFilter = 'all';
        let searchQuery = '';

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞
        function createContactCard(contact) {
            return `
                <div class="contact-card" data-user-id="${contact.id}" data-username="${contact.username}" data-privacy="${contact.privacy}">
                    <div class="contact-avatar ${contact.theme}">${contact.avatar}</div>
                    <div class="contact-info">
                        <h4>${contact.name} ${contact.isAdmin ? '<i class="fas fa-shield-alt" style="color: var(--warning-color); font-size: 12px; margin-left: 5px;"></i>' : ''}</h4>
                        <div class="contact-details">
                            <span>@${contact.username}</span>
                            <div class="online-status">
                                <div class="online-dot ${contact.online ? '' : 'offline'}"></div>
                                <span>${contact.online ? '–í —Å–µ—Ç–∏' : `–ë—ã–ª(–∞) ${contact.lastSeen}`}</span>
                            </div>
                            ${contact.sharedAnime > 0 ? `<span>¬∑ ${contact.sharedAnime} –æ–±—â–∏—Ö –∞–Ω–∏–º–µ</span>` : ''}
                        </div>
                    </div>
                    <div class="contact-actions">
                        <button class="contact-action-btn telegram-chat-btn" title="–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram">
                            <i class="fab fa-telegram"></i>
                        </button>
                        ${contact.isFriend ? `
                            <button class="contact-action-btn" title="–î—Ä—É–≥" style="color: var(--success-color);">
                                <i class="fas fa-user-friends"></i>
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
        function filterContacts() {
            let filtered = [...contactsData];
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
            if (searchQuery) {
                const query = searchQuery.toLowerCase();
                filtered = filtered.filter(contact => 
                    contact.name.toLowerCase().includes(query) || 
                    contact.username.toLowerCase().includes(query)
                );
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∞–±–∞–º
            switch(currentFilter) {
                case 'online':
                    filtered = filtered.filter(contact => contact.online);
                    break;
                case 'friends':
                    filtered = filtered.filter(contact => contact.isFriend);
                    break;
                case 'admins':
                    filtered = filtered.filter(contact => contact.isAdmin);
                    break;
                case 'recent':
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ "–Ω–µ–¥–∞–≤–Ω–∏–µ"
                    filtered = filtered.slice(0, 3);
                    break;
            }
            
            return filtered;
        }

        // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
        function renderContacts() {
            const container = document.getElementById('contactsList');
            const filteredContacts = filterContacts();
            
            container.innerHTML = '';
            
            if (filteredContacts.length === 0) {
                container.innerHTML = `
                    <div class="no-contacts">
                        <i class="fas fa-users"></i>
                        <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>${searchQuery ? '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å' : '–î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–∑–µ–π –∏–∑ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞'}</p>
                    </div>
                `;
                return;
            }
            
            filteredContacts.forEach(contact => {
                container.innerHTML += createContactCard(contact);
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ Telegram
            document.querySelectorAll('.telegram-chat-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    const contactCard = this.closest('.contact-card');
                    const userId = contactCard.dataset.userId;
                    const username = contactCard.dataset.username;
                    const privacy = contactCard.dataset.privacy;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
                    if (privacy === 'disabled') {
                        window.YoukaiStudio?.showNotification('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–µ—Ç–∏–ª –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è', 'warning');
                        return;
                    }
                    
                    // –û—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç –≤ Telegram
                    window.YoukaiStudio?.openTelegramChat(userId, username);
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –∫–æ–Ω—Ç–∞–∫—Ç–∞
            document.querySelectorAll('.contact-card').forEach(card => {
                card.addEventListener('click', function() {
                    const userId = this.dataset.userId;
                    showContactProfile(userId);
                });
            });
        }

        // –ü–æ–∫–∞–∑ –ø—Ä–æ—Ñ–∏–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
        function showContactProfile(userId) {
            const contact = contactsData.find(c => c.id === userId);
            if (!contact) return;
            
            let message = `üë§ ${contact.name}\n`;
            message += `@${contact.username}\n\n`;
            message += `üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n`;
            message += `‚Ä¢ ${contact.online ? 'üü¢ –í —Å–µ—Ç–∏' : '‚ö´ –ë—ã–ª(–∞) ' + contact.lastSeen}\n`;
            message += `‚Ä¢ ${contact.sharedAnime} –æ–±—â–∏—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö –∞–Ω–∏–º–µ\n`;
            message += `‚Ä¢ ${contact.isFriend ? '‚úÖ –í –¥—Ä—É–∑—å—è—Ö' : '–ù–µ –≤ –¥—Ä—É–∑—å—è—Ö'}\n`;
            message += `‚Ä¢ ${contact.isAdmin ? 'üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}\n\n`;
            
            if (contact.privacy === 'disabled') {
                message += '‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–µ—Ç–∏–ª –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è';
            }
            
            const tg = window.YoukaiStudio?.getTelegramWebApp();
            if (tg && tg.showAlert) {
                tg.showAlert(message);
            } else {
                alert(message);
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function checkCurrentUserPrivacy() {
            const user = window.YoukaiStudio?.getCurrentUser();
            const privacyWarning = document.getElementById('privacyWarning');
            
            if (user) {
                const privacySetting = localStorage.getItem(`privacy_${user.id}`);
                if (privacySetting === 'disabled') {
                    privacyWarning.style.display = 'block';
                } else {
                    privacyWarning.style.display = 'none';
                }
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã
            renderContacts();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
            checkCurrentUserPrivacy();
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∏—Å–∫–∞
            const searchInput = document.getElementById('contactsSearch');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    searchQuery = this.value.trim();
                    renderContacts();
                });
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–±–æ–≤
            document.querySelectorAll('.contact-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.contact-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    currentFilter = this.dataset.filter;
                    renderContacts();
                });
            });
            
            // Telegram —Å—Å—ã–ª–∫–∞ –≤ —Ñ—É—Ç–µ—Ä–µ
            const telegramLink = document.getElementById('telegramLink');
            if (telegramLink) {
                telegramLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tg = window.YoukaiStudio?.getTelegramWebApp();
                    if (tg && tg.openTelegramLink) {
                        tg.openTelegramLink('https://t.me/youkaistudio_community');
                    } else {
                        window.open('https://t.me/youkaistudio_community', '_blank');
                    }
                });
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            window.addEventListener('storage', function(e) {
                if (e.key === 'tg_user') {
                    checkCurrentUserPrivacy();
                }
            });
        });

        // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
        if (window.YoukaiStudio?.isMobileDevice()) {
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ç–∞–ø-–∑–æ–Ω—ã
            document.querySelectorAll('.contact-card, .contact-tab').forEach(el => {
                el.style.minHeight = '44px';
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–∞–π–ø –¥–ª—è —Ç–∞–±–æ–≤
            let touchStartX = 0;
            let touchEndX = 0;
            
            const tabsContainer = document.querySelector('.contacts-tabs');
            if (tabsContainer) {
                tabsContainer.addEventListener('touchstart', e => {
                    touchStartX = e.changedTouches[0].screenX;
                });
                
                tabsContainer.addEventListener('touchend', e => {
                    touchEndX = e.changedTouches[0].screenX;
                    handleSwipe();
                });
                
                function handleSwipe() {
                    const swipeThreshold = 50;
                    const diff = touchStartX - touchEndX;
                    
                    if (Math.abs(diff) > swipeThreshold) {
                        const tabs = document.querySelectorAll('.contact-tab');
                        const currentIndex = Array.from(tabs).findIndex(tab => tab.classList.contains('active'));
                        
                        if (diff > 0 && currentIndex < tabs.length - 1) {
                            // –°–≤–∞–π–ø –≤–ª–µ–≤–æ - —Å–ª–µ–¥—É—é—â–∏–π —Ç–∞–±
                            tabs[currentIndex + 1].click();
                        } else if (diff < 0 && currentIndex > 0) {
                            // –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ - –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–±
                            tabs[currentIndex - 1].click();
                        }
                    }
                }
            }
        }
    </script>
</body>
</html>
